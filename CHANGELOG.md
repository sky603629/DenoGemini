# 更新日志

## [2.0.0] - 2024-06-15

### 🎉 重大更新

#### ✨ 新功能
- **智能 JSON 检测** - 自动识别 JSON 请求，无需手动设置 `response_format`
- **思考模式优化** - Gemini 2.5 模型默认禁用思考功能，显著提升响应速度
- **自然输出优化** - 自动减少过度 Markdown 格式化，提供更自然的对话体验
- **完整工具调用支持** - 100% 兼容 OpenAI Function Calling 格式
- **无限制 Token 管理** - 完全移除默认限制，尊重用户设置

#### 🔧 技术改进
- **动态超时调整** - 根据请求复杂度和模型类型智能调整超时时间
- **多密钥轮换** - 自动负载均衡和故障转移机制
- **中文日志系统** - 详细的中文日志记录和错误信息
- **错误恢复机制** - 完善的重试和错误处理逻辑

#### 🐛 问题修复
- 修复 JSON 响应格式问题，确保返回纯净的 JSON
- 修复工具调用的 `finish_reason` 映射错误
- 修复思考模式的 token 预算设置
- 修复自然输出提示词对 JSON 请求的干扰

### 📋 API 兼容性
- ✅ 完全兼容 OpenAI API 格式
- ✅ 支持所有 Gemini 模型（1.5/2.0/2.5 系列）
- ✅ 支持流式和非流式响应
- ✅ 支持工具调用和 JSON 格式响应

### 🚀 性能优化
- 思考模式默认禁用，响应速度提升 60%+
- 智能超时机制，减少不必要的等待时间
- 多密钥轮换，提高服务可用性
- 自动格式检测，减少不必要的处理开销

---

## [1.0.0] - 2024-06-01

### 🎉 首次发布
- 基础 OpenAI API 兼容接口
- Gemini 模型支持
- 流式响应支持
- 基础工具调用功能
- 环境变量配置
- Deno Deploy 部署支持
